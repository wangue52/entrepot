{"openapi":"3.1.0","info":{"title":"Product Price Comparison API","description":"API pour comparer les prix de produits entre différents points de vente","version":"1.0.0"},"paths":{"/products/":{"post":{"tags":["Products"],"summary":"Créer un nouveau produit","description":"Ajoute un nouveau produit à la base de données","operationId":"create_product_products__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Product"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/products/{product_id}":{"get":{"tags":["Products"],"summary":"Obtenir les détails d'un produit","operationId":"read_product_products__product_id__get","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProductWithDetails"}}}},"404":{"description":"Produit non trouvé"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/products/search/":{"get":{"tags":["Products"],"summary":"Recherche avancée de produits","description":"Recherche de produits avec des critères avancés","operationId":"search_products_products_search__get","parameters":[{"name":"title","in":"query","required":false,"schema":{"anyOf":[{"type":"string","minLength":2},{"type":"null"}],"description":"Recherche par titre","title":"Title"},"description":"Recherche par titre"},{"name":"min_prices","in":"query","required":false,"schema":{"anyOf":[{"type":"integer","minimum":1},{"type":"null"}],"description":"Nombre minimum de prix enregistrés","title":"Min Prices"},"description":"Nombre minimum de prix enregistrés"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/Product"},"title":"Response Search Products Products Search  Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/sale-points/":{"get":{"tags":["Sale Points"],"summary":"Lister les points de vente","operationId":"read_sale_points_sale_points__get","parameters":[{"name":"skip","in":"query","required":false,"schema":{"type":"integer","minimum":0,"description":"Offset pour la pagination","default":0,"title":"Skip"},"description":"Offset pour la pagination"},{"name":"limit","in":"query","required":false,"schema":{"type":"integer","maximum":1000,"minimum":1,"description":"Limite de résultats","default":100,"title":"Limit"},"description":"Limite de résultats"},{"name":"city","in":"query","required":false,"schema":{"anyOf":[{"type":"string","minLength":2},{"type":"null"}],"description":"Filtrer par ville","title":"City"},"description":"Filtrer par ville"},{"name":"type","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Type de point de vente","title":"Type"},"description":"Type de point de vente"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/SalePointListResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/prices/":{"post":{"tags":["Prices"],"summary":"Ajouter un nouveau prix","operationId":"create_price_prices__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PriceCreate"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Price"}}}},"404":{"description":"Ressource associée non trouvée"},"409":{"description":"Le prix existe déjà pour cette combinaison"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/products/{product_id}/price-history":{"get":{"tags":["Prices"],"summary":"Historique des prix pour un produit","description":"Récupère l'historique des prix pour un produit donné","operationId":"get_product_price_history_products__product_id__price_history_get","parameters":[{"name":"product_id","in":"path","required":true,"schema":{"type":"integer","title":"Product Id"}},{"name":"sale_point_id","in":"query","required":false,"schema":{"anyOf":[{"type":"string"},{"type":"null"}],"description":"Filtrer par point de vente","title":"Sale Point Id"},"description":"Filtrer par point de vente"},{"name":"start_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"\\d{4}-\\d{2}-\\d{2}"},{"type":"null"}],"description":"Date de début (YYYY-MM-DD)","title":"Start Date"},"description":"Date de début (YYYY-MM-DD)"},{"name":"end_date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"\\d{4}-\\d{2}-\\d{2}"},{"type":"null"}],"description":"Date de fin (YYYY-MM-DD)","title":"End Date"},"description":"Date de fin (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PriceHistoryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/dates/from-iso/":{"post":{"tags":["Dates"],"summary":"Créer une date à partir d'une chaîne ISO","description":"Crée une nouvelle date à partir d'une chaîne au format YYYY-MM-DD","operationId":"create_date_from_iso_dates_from_iso__post","parameters":[{"name":"date_iso","in":"query","required":true,"schema":{"type":"string","pattern":"\\d{4}-\\d{2}-\\d{2}","title":"Date Iso"}}],"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Date"}}}},"400":{"description":"Format de date invalide"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/price-comparison/":{"get":{"tags":["Statistics"],"summary":"Comparaison de prix entre points de vente","description":"Compare les prix d'un produit entre différents points de vente","operationId":"compare_prices_price_comparison__get","parameters":[{"name":"product_id","in":"query","required":true,"schema":{"type":"integer","description":"ID du produit à comparer","title":"Product Id"},"description":"ID du produit à comparer"},{"name":"date","in":"query","required":false,"schema":{"anyOf":[{"type":"string","pattern":"\\d{4}-\\d{2}-\\d{2}"},{"type":"null"}],"description":"Date spécifique (YYYY-MM-DD)","title":"Date"},"description":"Date spécifique (YYYY-MM-DD)"}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/PriceComparisonResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/health":{"get":{"tags":["Health"],"summary":"Vérifier l'état de l'API","description":"Vérifie la santé de l'API et de la base de données","operationId":"health_check_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HealthCheck"}}}}}}}},"components":{"schemas":{"Date":{"properties":{"id":{"type":"string","title":"Id"},"day":{"type":"integer","title":"Day"},"month":{"type":"integer","title":"Month"},"year":{"type":"integer","title":"Year"},"prices":{"items":{"$ref":"#/components/schemas/Price"},"type":"array","title":"Prices","default":[]}},"type":"object","required":["id","day","month","year"],"title":"Date"},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"HealthCheck":{"properties":{"status":{"type":"string","title":"Status"},"database":{"type":"string","title":"Database"},"timestamp":{"type":"string","title":"Timestamp"}},"type":"object","required":["status","database","timestamp"],"title":"HealthCheck"},"Price":{"properties":{"id_product":{"type":"integer","title":"Id Product"},"id_sale_point":{"type":"string","title":"Id Sale Point"},"id_date":{"type":"string","title":"Id Date"},"price":{"type":"number","title":"Price"},"product":{"$ref":"#/components/schemas/Product"},"sale_point":{"$ref":"#/components/schemas/SalePoint"},"date":{"$ref":"#/components/schemas/Date"}},"type":"object","required":["id_product","id_sale_point","id_date","price"],"title":"Price"},"PriceComparisonEntry":{"properties":{"sale_point_id":{"type":"integer","title":"Sale Point Id"},"sale_point_name":{"type":"string","title":"Sale Point Name"},"price":{"type":"number","title":"Price"},"date":{"type":"string","title":"Date"}},"type":"object","required":["sale_point_id","sale_point_name","price","date"],"title":"PriceComparisonEntry"},"PriceComparisonResponse":{"properties":{"product_id":{"type":"integer","title":"Product Id"},"date":{"type":"string","title":"Date"},"comparison":{"items":{"$ref":"#/components/schemas/PriceComparisonEntry"},"type":"array","title":"Comparison"}},"type":"object","required":["product_id","date","comparison"],"title":"PriceComparisonResponse"},"PriceCreate":{"properties":{"id_product":{"type":"integer","title":"Id Product"},"id_sale_point":{"type":"string","title":"Id Sale Point"},"id_date":{"type":"string","title":"Id Date"},"price":{"type":"number","title":"Price"}},"type":"object","required":["id_product","id_sale_point","id_date","price"],"title":"PriceCreate"},"PriceHistoryEntry":{"properties":{"date":{"type":"string","title":"Date"},"price":{"type":"number","title":"Price"},"sale_point_id":{"type":"string","title":"Sale Point Id"},"sale_point_name":{"type":"string","title":"Sale Point Name"}},"type":"object","required":["date","price","sale_point_id","sale_point_name"],"title":"PriceHistoryEntry"},"PriceHistoryResponse":{"properties":{"product_id":{"type":"integer","title":"Product Id"},"price_history":{"items":{"$ref":"#/components/schemas/PriceHistoryEntry"},"type":"array","title":"Price History"},"count":{"type":"integer","title":"Count"}},"type":"object","required":["product_id","price_history","count"],"title":"PriceHistoryResponse"},"Product":{"properties":{"title":{"type":"string","title":"Title"},"link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link"},"id":{"type":"integer","title":"Id"},"prices":{"items":{"$ref":"#/components/schemas/Price"},"type":"array","title":"Prices","default":[]},"product_sale_points":{"items":{"$ref":"#/components/schemas/ProductSalePoint"},"type":"array","title":"Product Sale Points","default":[]}},"type":"object","required":["title","id"],"title":"Product"},"ProductCreate":{"properties":{"title":{"type":"string","title":"Title"},"link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link"}},"type":"object","required":["title"],"title":"ProductCreate"},"ProductSalePoint":{"properties":{"id_product":{"type":"string","title":"Id Product"},"id_sale_point":{"type":"string","title":"Id Sale Point"},"product":{"$ref":"#/components/schemas/Product"},"sale_point":{"$ref":"#/components/schemas/SalePoint"}},"type":"object","required":["id_product","id_sale_point"],"title":"ProductSalePoint"},"ProductWithDetails":{"properties":{"title":{"type":"string","title":"Title"},"link":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Link"},"id":{"type":"integer","title":"Id"},"prices":{"items":{"$ref":"#/components/schemas/Price"},"type":"array","title":"Prices","default":[]},"product_sale_points":{"items":{"$ref":"#/components/schemas/ProductSalePoint"},"type":"array","title":"Product Sale Points","default":[]},"sale_points":{"items":{"$ref":"#/components/schemas/SalePoint"},"type":"array","title":"Sale Points","default":[]}},"type":"object","required":["title","id"],"title":"ProductWithDetails"},"SalePoint":{"properties":{"id":{"type":"integer","title":"Id"},"name":{"type":"string","title":"Name"},"city":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"City"},"website":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Website"},"type":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Type"},"prices":{"items":{"$ref":"#/components/schemas/Price"},"type":"array","title":"Prices","default":[]},"product_sale_points":{"items":{"$ref":"#/components/schemas/ProductSalePoint"},"type":"array","title":"Product Sale Points","default":[]}},"type":"object","required":["id","name"],"title":"SalePoint"},"SalePointListResponse":{"properties":{"sale_points":{"items":{"$ref":"#/components/schemas/SalePoint"},"type":"array","title":"Sale Points"},"total":{"type":"integer","title":"Total"},"page":{"type":"integer","title":"Page"},"size":{"type":"integer","title":"Size"}},"type":"object","required":["sale_points","total","page","size"],"title":"SalePointListResponse"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}}},"tags":[{"name":"Products","description":"Opérations sur les produits"},{"name":"Sale Points","description":"Gestion des points de vente"},{"name":"Prices","description":"Gestion des prix historiques"},{"name":"Dates","description":"Gestion des dates"},{"name":"Product Sale Points","description":"Associations produits-points de vente"},{"name":"Statistics","description":"Statistiques et analyses"},{"name":"Health","description":"Contrôle de santé de l'API"}]}